<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Dados Avan√ßado</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="customStyles.css">
    <script type="importmap">
    {
      "imports": {
        "lodash-es/": "https://cdn.jsdelivr.net/npm/lodash-es@4.17.21/"
      }
    }
    </script>
</head>
<body>
    <div class="container">
        <div class="profile-circles-container" id="profileCirclesContainer">
            <!-- Profile circles will be generated here by JS -->
        </div>

        <div class="header-container">
            <h1>Gerador de Dados Pessoais M√∫ltiplos</h1>
            <div id="helpButton" class="help-icon" title="Ajuda">üí°</div>
        </div>
        <p>Use a primeira caixa para extra√ß√£o e c√≥pia imediata. Use os Bancos de Dados (B-1 a B-5) para salvar m√∫ltiplas entradas (filtradas por ano de nascimento 1974-2004). Clique nas bolinhas de perfil (1-5) para gerar dados do banco correspondente.</p>
        
        <h2>Extra√ß√£o R√°pida (Independente dos Bancos):</h2>
        <textarea id="inputText" rows="10" placeholder=""></textarea>
        <button id="generateButton">Gerar e Copiar Imediatamente</button>
        
        <h2>Gerenciamento de Bancos de Dados:</h2>
        <div class="bank-selector-container" id="bankSelectorContainer">
            <p>Selecione um banco para visualizar/adicionar dados ou gerar um novo nome:</p>
            <!-- Bank selector buttons will be generated here by JS -->
        </div>
        
        <div class="button-group">
            <button id="dbToggleButton">Adicionar/Ver Dados do Banco Selecionado</button>
            <button id="generateFromDbButton">Gerar Novo Nome do Banco Selecionado</button>
        </div>
        <p id="dbStatus">Selecione um banco para ver o status.</p>

        <div id="dbSection" class="hidden">
            <h2 id="dbSectionTitle">Adicionar ao Banco de Dados</h2>
            <p>Cole um ou mais registros abaixo. Cada registro deve conter Nome, CPF e Data de Nascimento. Ser√£o salvos apenas os registros com ano de nascimento entre 1974 e 2004.</p>
            <textarea id="dbInputText" rows="12" placeholder="Cole os dados aqui para salvar no banco selecionado. Certifique-se de incluir 'Data de Nascimento: DD/MM/YYYY'.&#10;Exemplo:&#10;Nome: JULIO CESAR CARVALHO&#10;‚Ä¢ CPF: 07096363696&#10;‚Ä¢ Sexo: M&#10;‚Ä¢ Data de Nascimento: 15/11/1981&#10;...&#10;&#10;Nome: MARIA SILVA&#10;‚Ä¢ CPF: 12345678900&#10;‚Ä¢ Data de Nascimento: 01/01/1990"></textarea>
            <button id="saveToDbButton">Salvar no Banco de Dados Selecionado</button>
            <button id="closeDbSectionButton" class="secondary">Fechar</button>
            <div id="dbMessage" class="message-area"></div>
        </div>
        
        <h2>Resultado Gerado:</h2>
        <pre id="outputText"></pre>

        <div class="advanced-actions">
            <button id="backupButton" class="secondary">Fazer Backup</button>
            <button id="restoreButton" class="secondary">Importar Backup</button>
            <input type="file" id="restoreInput" style="display: none;" accept=".json">
        </div>
        
        <button id="resetAllDbsButton" class="danger">Resetar TODOS os Bancos de Dados e Perfis</button>
    </div>

    <div id="helpModal" class="modal">
        <div class="modal-content">
            <span class="modal-close-button">&times;</span>
            <h2>Guia de Uso</h2>
            
            <h4>Extra√ß√£o R√°pida</h4>
            <p>Cole qualquer texto contendo "Nome:" e "CPF:" na primeira caixa e clique em "Gerar e Copiar Imediatamente". O sistema extrair√°, formatar√° e copiar√° esses dois dados, ignorando todo o resto. √â uma ferramenta para uso r√°pido e √∫nico, independente dos bancos de dados.</p>
            
            <h4>Bancos de Dados e Perfis</h4>
            <p>O cora√ß√£o da ferramenta. Voc√™ pode ter m√∫ltiplos bancos de dados (B-1, B-2, etc.) para organizar diferentes listas de pessoas.</p>
            <ul>
                <li><strong>Bolinhas de Perfil (Topo):</strong> Cada bolinha representa um banco de dados.
                    <ul>
                        <li><strong>Clique:</strong> Gera e copia um nome/CPF do banco correspondente (ex: bolinha "P-1" usa dados do "B-1"). Os nomes n√£o se repetem at√© que toda a lista seja usada.</li>
                        <li><strong>Clique com bot√£o direito:</strong> Permite renomear o perfil para algo mais descritivo (ex: "Clientes Aprovados"). O nome do banco (B-1) continuar√° vis√≠vel acima do novo nome.</li>
                        <li><strong>Bolinha com "+":</strong> Clique para adicionar um novo banco de dados e seu perfil correspondente.</li>
                    </ul>
                </li>
                <li><strong>Gerenciamento de Bancos (Meio):</strong>
                    <ul>
                        <li><strong>Sele√ß√£o (B-1, B-2...):</strong> Clique para selecionar um banco de dados. O banco ativo √© destacado em azul. Todas as a√ß√µes abaixo se aplicar√£o ao banco selecionado.</li>
                         <li><strong>Clique com bot√£o direito nos bot√µes B-X:</strong> Abre um menu para <strong>resetar</strong> (limpar todos os dados) ou <strong>excluir</strong> permanentemente o banco de dados. <strong>Aten√ß√£o:</strong> Exige senha de confirma√ß√£o (100822).</li>
                    </ul>
                </li>
            </ul>

            <h4>Adicionando Dados a um Banco</h4>
            <ol>
                <li>Selecione o banco desejado (ex: B-1).</li>
                <li>Clique em "Adicionar/Ver Dados do Banco Selecionado".</li>
                <li>Na nova √°rea que aparece, cole um ou mais registros. O sistema s√≥ salvar√° pessoas com ano de nascimento entre <strong>1974 e 2004</strong>.</li>
                <li>Clique em "Salvar no Banco de Dados".</li>
            </ol>
            
            <h4>A√ß√µes Avan√ßadas (Bot√µes inferiores)</h4>
            <ul>
                <li><strong>Fazer Backup:</strong> Salva todos os seus bancos de dados e nomes de perfis em um √∫nico arquivo <code>.json</code> no seu computador.</li>
                <li><strong>Importar Backup:</strong> Carrega um arquivo de backup <code>.json</code>. <strong>Aten√ß√£o:</strong> Isso substituir√° todos os dados atuais pelos dados do arquivo.</li>
                <li><strong>Resetar TUDO:</strong> Apaga permanentemente todos os bancos, perfis e retorna a aplica√ß√£o ao estado inicial. Exige senha de confirma√ß√£o (100822).</li>
            </ul>

            <p><strong>Dica:</strong> Todas as suas altera√ß√µes s√£o salvas automaticamente no navegador. Se fechar a aba, tudo estar√° aqui quando voltar.</p>
        </div>
    </div>
    <script type="module" src="script.js"></script>
</body>
</html>